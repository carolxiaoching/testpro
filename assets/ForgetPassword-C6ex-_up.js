import{M as N,m as h,f as r,k as g,n as s,p as a,w as l,i,F as q,u as B,l as _,S as P,q as o,R as L,t as x,Y as U}from"./index-CiKi2_ID.js";import{_ as j}from"./AlertModal-N418mNAX.js";const z={class:"d-flex flex-wrap justify-content-center aling-items-center my-17"},A={key:0,class:"mb-11 py-11 alert alert-danger"},D={class:"mb-16"},I={class:"mb-11 text-center"},T=["disabled"],H={__name:"ForgetPassword",setup(Y){const y=B(),v=N(),k=h(),{openLoading:w,closeLoading:p}=v,{pushMessage:V}=k,d=r(),b=r(),m=r(""),c=r({email:""});async function F(){var t,e,n;w();try{await U(c.value),(t=d.value)==null||t.openModal(),p()}catch(u){V({style:"danger",title:"信件傳送失敗",text:"信件傳送失敗，請重新輸入您註冊的電子信箱"}),m.value=((n=(e=u.response)==null?void 0:e.data)==null?void 0:n.message)||"信件傳送失敗，請重新輸入您註冊的電子信箱",p()}}function M(){var t;b.value.resetForm(),(t=d.value)==null||t.hideModal(),y.push("/")}return(t,e)=>{const n=i("VField"),u=i("ErrorMessage"),R=i("router-link"),C=i("VForm");return _(),g(q,null,[s("section",z,[a(C,{class:"accountForm bg-white rounded-3 shadow",onSubmit:F,ref_key:"formRef",ref:b},{default:l(({errors:S,meta:f})=>[e[4]||(e[4]=s("h1",{class:"mb-8 text-center h3"},"忘記密碼",-1)),e[5]||(e[5]=s("p",{class:"mb-14 text-center text-muted lh-lg"},[o(" 若您忘記密碼 "),s("span",{class:"d-block"},"請輸入您註冊時輸入的電子信箱")],-1)),m.value?(_(),g("p",A,[e[1]||(e[1]=s("i",{class:"bi bi-exclamation-triangle-fill me-4"},null,-1)),o(" "+L(m.value),1)])):P("",!0),s("div",D,[e[2]||(e[2]=s("label",{for:"email",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),o(" 註冊的電子信箱： ")],-1)),a(n,{type:"email",name:"電子信箱",id:"email",class:x(["form-control",{"is-invalid":S.電子信箱}]),placeholder:"請輸入您註冊的電子信箱",rules:"email|required",modelValue:c.value.email,"onUpdate:modelValue":e[0]||(e[0]=E=>c.value.email=E),required:""},null,8,["class","modelValue"]),a(u,{name:"電子信箱",class:"text-danger"})]),s("div",I,[s("button",{type:"submit","aria-disabled":"true",class:x(["w-75 btn btn-primary",{disabled:!f.valid}]),disabled:!f.valid}," 發送重設密碼連結 ",10,T)]),a(R,{to:"/signUp",class:"d-block text-end text-decoration-underline"},{default:l(()=>e[3]||(e[3]=[o(" 還未註冊會員？立即註冊 ")])),_:1})]),_:1},512)]),a(j,{ref_key:"alertModalRef",ref:d},{"modal-header":l(()=>e[6]||(e[6]=[s("span",{class:"titleIcon bg-secondary text-white"},[s("i",{class:"bi bi-bell-fill"})],-1),o(" 密碼重設信件已發送 ")])),"modal-content":l(()=>e[7]||(e[7]=[s("p",null,"密碼重設連結已發送，請檢查您的電子郵件！",-1),s("p",{class:"mb-8"},"（可能需要幾分鐘）",-1),s("p",null,"若未收到信件，請查看垃圾郵件夾",-1),s("p",null,"關閉後將跳轉至首頁",-1)])),"modal-footer":l(()=>[s("button",{type:"button",class:"w-50 btn btn-primary",onClick:M},"關閉")]),_:1},512)],64)}}};export{H as default};
