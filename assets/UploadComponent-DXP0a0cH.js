import{M as C,m as S,f as m,k as o,l,n as t,z as b,Q as v,q as B,R as f,F as T,ai as F}from"./index-CiKi2_ID.js";const j={key:0},D={class:"position-relative mb-11 mb-xl-17 border rounded-3"},M={class:"text-center"},P={key:1},$={for:"image",class:"w-100 mb-11 mb-xl-17 border rounded-3 overflow-hidden"},z={key:1,class:"uploadLabelBtn cursorPointer d-flex flex-column justify-content-center align-items-center fs-5"},N={for:"image",class:"d-block text-center"},O={class:"btn btn-primary w-75"},q={__name:"UploadComponent",props:{tempImageUrl:{type:String,default:""},imageType:{type:String,default:"avatar"}},emits:["updateImage"],setup(a,{emit:y}){const k=C(),w=S(),{openLoading:x,closeLoading:u}=k,{pushMessage:g}=w,I=a,h=y,i=m(""),r=m(!1),c=m("");function U(s){const e=s.target.files[0];if(e){i.value=e;let n=window.URL.createObjectURL(e);r.value=!0,c.value=n}}function p(){i.value="",c.value="",r.value=!1,window.URL.revokeObjectURL(i.value)}async function _(){var e,n;const s=new FormData;s.append("image",i.value),x();try{const d=await F(s,I.imageType),{status:L,data:R}=d.data;L==="success"?h("updateImage",R.imageUrl):g({style:"danger",title:"上傳失敗",text:"上傳失敗，請重整網頁"}),p(),u()}catch(d){g({style:"danger",title:"上傳失敗",text:((n=(e=d.response)==null?void 0:e.data)==null?void 0:n.message)||"上傳失敗，請重整網頁"}),u()}}return(s,e)=>(l(),o(T,null,[t("input",{type:"file",accept:"image/*",id:"image",name:"image",class:"d-none",onChange:U},null,32),r.value?(l(),o("div",j,[t("div",D,[t("a",{href:"#",class:"previewResetBtn position-absolute top-0 right-0 px-2 text-white fs-2",onClick:e[0]||(e[0]=b(n=>p(),["prevent"]))},e[1]||(e[1]=[t("i",{class:"bi bi-x"},null,-1)])),t("div",{class:"previewImage backgroundCover rounded-3",style:v({backgroundImage:`url(${c.value})`})},null,4)]),t("div",M,[t("button",{type:"button",class:"btn btn-primary w-75",onClick:b(_,["prevent"])}," 確認更新 ")])])):(l(),o("div",P,[t("label",$,[a.tempImageUrl?(l(),o("span",{key:0,class:"uploadLabelImage backgroundCover cursorPointer d-block",style:v({backgroundImage:`url(${a.tempImageUrl})`})},null,4)):(l(),o("span",z,[e[2]||(e[2]=t("i",{class:"bi bi-cloud-arrow-up d-block display-3"},null,-1)),B(" 點擊上傳"+f(a.imageType==="avatar"?"頭像":"封面"),1)]))]),t("label",N,[t("span",O,f(a.imageType==="avatar"?"更新頭像":"更新封面"),1)])]))],64))}};export{q as _};
